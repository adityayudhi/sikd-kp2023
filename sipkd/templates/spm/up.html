{% extends 'main.html' %}
{% load staticfiles %}
{% block content %}
<div class="header-konten">
    <span style="font-weight:bold;">Surat Perintah Membayar - Uang Persediaan (SPM-UP)</span>
</div>
<div class="isi-konten" style="padding: 10px 10px 0px 5px !important;">
    <form class="form-horizontal" method="POST" id="myForm" name="myForm" action="">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <div class="form-group batas-bawah">
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">Organisasi</div>
                <div class="col-xs-12 col-sm-9 col-md-9 col-lg-10">
                    <div class="input-group">
                        {{btn_organisasi_spm|safe}}  
                    </div>
                </div>
                <input type="hidden" id="jen" value="UP" name="jen">
                <div class="col-xs-12 col-sm-9 col-md-9 col-lg-10">
                    <input type="hidden" class="form-control input-sm" placeholder="Deskripsi SPP" id="deskripsi_spp" name="deskripsi_spp" >
                    <input type="hidden" class="form-control input-sm" placeholder="Total SPP" id="jml_spp" name="jml_spp" >
                    <input type="hidden" class="form-control input-sm" placeholder="no spm lama" id="no_spm_lama" name="no_spm_lama" >
                    <input type="hidden" class="form-control input-sm" placeholder="Total SPM" id="jml_spm" name="jml_spm" >
                    <input type="hidden" class="form-control input-sm" placeholder="Informasi" id="informasi_spm" name="informasi_spm" >
                    <input type="hidden" class="form-control input-sm" placeholder="Unit" id="frm_unit" name="frm_unit" >
                </div>
            </div>
            <div class="form-group batas-bawah">
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">No. SPM</div>
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <div class="input-group">
                        <input type="text" class="form-control input-sm uppercase" value="" maxlength="100" 
                        placeholder="No. SPM" id="no_spm" name="no_spm">
                        <span class="input-group-addon" id="kunci_spm">( DRAFT )</span>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1 batas-atas">Tanggal</div>
                <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    <div class="input-group">
                        <input type="text" class="form-control input-sm" value="{{tgl_login}}"
                            placeholder="Tanggal SPM" id="tgl_spm" name="tgl_spm" 
                            style="cursor: pointer;">
                        <label class="input-group-addon" for="tgl_spm"
                            style="cursor: pointer;"><i class="fa fa-calendar-o"></i></label>
                    </div>
                </div>
            </div>  
            <div class="form-group batas-bawah">
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">No. SPP</div>
                <div class="col-xs-12 col-sm-9 col-md-6 col-lg-6">
                    <div class="input-group">
                        <input type="text" class="form-control input-sm" value="" 
                        placeholder="No. SPP" id="no_spp" name="no_spp" readonly="">
                            {{btn_spp_spm|safe}}
                    </div>
                </div>
                <div class="col-xs-12 col-sm-1 col-md-1 col-lg-1 batas-atas">Tanggal</div>
                <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
                    <div class="input-group">
                        <input type="text" class="form-control input-sm" value="{{tgl_login}}" 
                            placeholder="Tanggal SPP" id="tgl_spp" name="tgl_spp"
                            style="cursor: pointer;" readonly="readonly" disabled="">
                        <label class="input-group-addon" for="tgl_spp"
                            style="cursor: pointer;"><i class="fa fa-calendar-o"></i></label>
                    </div>
                </div>
            </div>
            <div class="form-group batas-bawah">
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">Jumlah</div>
                <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
                    <input type="text" class="form-control input-sm" placeholder="Rp 0,00" id="jml_spp_lama" name="jml_spp_lama" disabled="">
                </div>
            </div>
            <div class="form-group batas-bawah">
                <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">Status Keperluan</div>
                <div class="col-xs-12 col-sm-9 col-md-9 col-lg-10">
                    <textarea class="form-control" placeholder="Status Keperluan" id="status_keperluan" name="status_keperluan" maxlength="5000">
                        
                    </textarea>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
            <div class="panel panel-primary">
                <div class="panel-body">
                    <span class="input-group-btn">
                        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 batas-bawah">
                            {{btn_lihat_spm|safe}}<span style="margin-right: 5px;"></span>{{btn_tambah_spm|safe}}
                        </div>                          
                    </span>
                    <div class="form-group batas-bawah">
                        <div class="col-xs-12 col-sm-2 col-md-2 col-lg-2 batas-atas">Bendahara</div>
                        <div class="col-xs-12 col-sm-10 col-md-10 col-lg-10">
                            <div class="input-group">
                                <input type="text" class="form-control input-sm" value="" placeholder="Bendahara Pengeluaran / Pihak Ketiga" id="bendahara" name="bendahara" >
                                    {{btn_bendahara|safe}}
                            </div>
                        </div>
                    </div>
                    <div class="form-group batas-bawah">
                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">No. Rekening</div>
                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-4">
                            <input type="text" class="form-control input-sm" value="" 
                                placeholder="NOREK Bendahara" id="norek_bendahara" name="norek_bendahara" maxlength="100" >
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">
                            <div>Nama Bank</div>
                        </div>
                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-4">
                            <div class="input-group">
                                <input type="text" class="form-control input-sm" value="" readonly="readonly" placeholder="Nama Bank" id="nama_bank" name="nama_bank" 
                                    style="text-transform: uppercase;">
                                <input type="hidden" class="input-sm input-kode" readonly id="kode_bank" name="kode_bank">
                              
                                <label class="input-group-addon baten" for="bank"
                                onclick="LoadBanknya(this)" alt="{% url 'sipkd:load_bank_up' %}"
                                style="cursor: pointer;"><i class="fa fa-search-plus"></i></label>
                            </div>  
                        </div>
                    </div>
                    <div class="form-group batas-bawah">
                        <div class="col-xs-12 col-sm-3 col-md-3 col-lg-2 batas-atas">NPWP</div>
                        <div class="col-xs-12 col-sm-9 col-md-9 col-lg-10">
                            <input type="text" class="form-control input-sm" value="" 
                                placeholder="NPWP Bendahara" id="npwp_bendahara" name="npwp_bendahara" maxlength="100" >
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel panel-primary">
                <div class="panel-body" style="padding:5px;">
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            {{btn_simpan|safe}}
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <div class="btn btn-sm btn-warning" style="width:100%;" title="Cetak Data" id="btn_cetak" onclick="cekLaporanSPM(this)" disabled >
                                <i class="fa fa-print"></i>&nbsp;&nbsp;Cetak
                            </div>
                        </div>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            {{btn_hapus|safe}}
                        </div>
                </div>
            </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 batas-atas">
            <div class="panel panel-primary">
                <div class="panel-body" style="padding:5px;">
                    <div style="font-weight: bold;" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Jumlah Yang Dibayarkan 
                        </div>
                        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                            : Rp.  <span style="text-transform: capitalize;" id="label_jml_spp_lama">0,00</span>
                            <input type="hidden" id="jml_spp_lama" disabled="true" placeholder="0,00" name="jml_spp_lama" style="width:400px;border:1px solid #fff !important">
                        </div>
                    </div>
                    <div style="font-weight: bold;" class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Terbilang
                        </div>
                        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                            : <span style="font-style: italic; text-transform: capitalize;" id="terbilang"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    
</div>
<!-- /datepicker -->
<script type="text/javascript">
    var skpd = $("#kd_org2").val();
    var jenis_modul = 'UP';
    var link_generate_rinci_spm = "{% url 'sipkd:generate_rinci_spm' 'up' %}"
    var link_generate_rinci_spp = "{% url 'sipkd:generate_rinci_spp' 'up' %}"
    var link_tabel_rinci_spm = "{% url 'sipkd:generate_tbl_spm' 'up' %}"
    var link_tabel_afektasi_spm = "{% url 'sipkd:generate_afektasi_spm' 'up' %}"
    var link_tabel_rinci_dasar_spd = "{% url 'sipkd:generate_tbl_dasar_spd' 'up' %}"
    var link_tabel_rinci_dasar_spd_to_spp = "{% url 'sipkd:generate_tbl_dasar_spd_to_spp' 'up' %}"
    var link_generate_rekening = "{% url 'sipkd:generate_rekening' 'up' %}"
    var link_simpan_spm = "{% url 'sipkd:spm_save_up' 'up' %}"
    var link_cek_spm = "{% url 'sipkd:cek_spm' 'up' %}"
    var link_cek_pejabat = "{% url 'sipkd:cek_pejabat' 'up' %}"
    var link_hapus_spm = "{% url 'sipkd:spm_delete' 'up' %}"
    var link_laporan_spm = "{% url 'sipkd:load_modal_spm' 'up' %}";

    $(function(){
        generate_nomor_auto_spm_gu_tu_ls();
    });

    function generate_nomor_auto_spm_gu_tu_ls(){
        generate_nomor_auto(getTahun($('#tgl_spm').val()), $('#no_spm'), 'SPM', getBlnToNum($('#tgl_spm').val()), $('#kd_org2').val().split('.')[0], $('#kd_org2').val().split('.')[1], $('#kd_org2').val().split('.')[2], $('#kd_org2').val().split('.')[3], 'UP');
    }
</script>

<script src="{% static 'js/spm/spm.js' %}"></script>
<!-- /datepicker -->
{% endblock %}
